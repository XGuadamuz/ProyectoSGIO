@model ProyectoSGIOCore.Models.Proyecto
@{
    ViewBag.Title = "Agregar Tareas";
    Layout = "~/Views/Proyecto/MenuProyecto.cshtml";
}

@if (TempData["MensajeError"] != null)
{
    <div class="alert alert-danger text-center mt-3" role="alert">
        @TempData["MensajeError"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<h2>Agregar Tareas al Proyecto: @Model.Nombre</h2>

<form asp-action="AgregarTareas" method="post">
    <input type="hidden" name="faseId" value="@Model.Id" />

    <div id="tareas-container">
        <!-- Contenedor de tareas dinámicas -->
    </div>

    <button type="button" onclick="addTask()">Agregar Tarea</button>
    <button type="submit">Guardar Tareas</button>
</form>

    <script>
        function addTask() {
            const taskIndex = document.querySelectorAll('.tarea').length;
            const taskHtml = `
                <div class="tarea">
                    <label>Nombre de la Tarea</label>
                    <input name="tareas[${taskIndex}].Nombre" />

                    <label>Fecha de Inicio</label>
                    <input type="date" name="tareas[${taskIndex}].FechaInicio" />

                    <label>Fecha de Fin</label>
                    <input type="date" name="tareas[${taskIndex}].FechaFin" />
                </div>
            `;
            document.getElementById('tareas-container').insertAdjacentHTML('beforeend', taskHtml);
        }
    </script>
